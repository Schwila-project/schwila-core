# 🧠 المرحلة 1: هوية دون تسجيل (Fingerprinting Unit)

## 🎯 الهدف
إنشاء نظام يتعرف على المستخدمين دون تسجيل دخول عبر تحليل تفاعلهم الرقمي (سلوك، بصمة، توقيت…)، وتخزين هذا التفاعل بشكل غير تعريفي.

---

## 🧩 مكونات الوحدة

| المكون                | التقنية المقترحة                    | الوظيفة                                   |
|----------------------|-------------------------------------|--------------------------------------------|
| بصمة الجهاز           | FingerprintJS, WebGL, AudioContext | تحديد المتصفح والجهاز بطريقة شبه فريدة    |
| تحليل السلوك         | JavaScript + DOM Events             | قياس الحركة، النقر، التسارع والتأخر        |
| منشئ الجلسة الذكية    | UUID + توقيت + بصمة متغيرة         | توليد Session-ID ديناميكي لكل زيارة        |
| Redis كمخزن مؤقت     | Redis                             | تخزين البصمة دون هوية حقيقية               |
| مقارنة ذكية للبصمات  | scoring system (%)                 | تحديد هل هذا "زائر معروف" أو جديد         |

---

## 🌀 سير العمل

1. الزائر يدخل الموقع.
2. يتم توليد بصمة المتصفح تلقائيًا.
3. في أول ثوانٍ، يتم مراقبة طريقة التفاعل (نقر، تمرير، تحريك…).
4. توليد Session-ID.
5. إرسال المعلومات إلى نقطة API `/identify`.
6. مقارنة الجلسة مع جلسات مخزنة سابقًا.
7. النظام يقرر:
   - 🎯 زائر معروف (تشابه > 85%)
   - 🔁 زائر متغيّر جزئيًا (60–85%)
   - ❓ زائر جديد كليًا (< 60%)

---

## 🔐 الاعتبارات الأمنية

- لا يتم تخزين IP أو بريد إلكتروني.
- لا يتم إنشاء أي ملفات تعريف للمستخدم (Cookies اختيارية مؤقتة).
- البصمة تتغير بطريقة تدريجية عند تغيّر السلوك.

---

## ✅ حالات اختبار رئيسية

- زائر متكرر بنفس السلوك → يتعرف عليه النظام بسلاسة
- زائر آلي (bot) → سلوك غير بشري → يتم تجاهله أو تحديه
- زائر حقيقي تغيّرت أدواته (جهاز/متصفح) → النظام يتعلمه من جديد

---

## 📦 مخرجات الوحدة

```json
{
  "session_id": "v4-random-uuid",
  "fingerprint": "hash string",
  "score": 93,
  "classification": "known"
}
