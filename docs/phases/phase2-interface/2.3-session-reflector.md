# 🪞 2.3 - عاكس الجلسة (Session Reflector)

## 🎯 الهدف
عرض ملاحظات تفاعلية فورية تعكس سلوك الزائر أثناء الجلسة، مما يمنح شعورًا بأن النظام "يراقب ويتفاعل" مع طريقة الاستخدام.

---

## 🧠 الفرضية
يمكن للنظام، من خلال تحليل السلوك اللحظي (scroll, click, focus)، أن يستنتج نمط الزائر ويعرض له رسائل أو اقتراحات تعزز التفاعل أو تسهّل التنقل.

---

## 🧩 المدخلات المطلوبة

| المتغير         | المصدر                         |
|------------------|--------------------------------|
| `behavior`       | من `behaviorData` (phase1.2)   |
| `classification` | من `/identify` (phase1.5)      |
| `session_id`     | من `sessionStorage`            |

---

## 💡 أمثلة على الانعكاس

| السلوك المكتشف                  | الرسالة المقترحة                          |
|----------------------------------|--------------------------------------------|
| تمرير سريع ومتكرر               | "📊 يبدو أنك تبحث بسرعة — هل ترغب في عرض مبسّط؟" |
| توقف طويل دون تفاعل             | "🕒 هل تحتاج مساعدة؟ يمكننا إرشادك!"         |
| نقر متكرر على عنصر معين         | "👆 هل ترغب في معرفة المزيد عن هذا القسم؟"     |
| فقدان التركيز المتكرر (blur)    | "👀 لاحظنا أنك تغادر الصفحة كثيرًا — هل نذكّرك لاحقًا؟" |

---

## 💻 كود مبدئي (client/session-reflector.js)

```js
function reflectSession(behavior) {
  if (behavior.scroll.length > 50) {
    showMessage("📊 تحب التفاصيل؟ جرب العرض الكامل");
  }

  if (behavior.clicks.length > 10) {
    showMessage("👆 هل ترغب في معرفة المزيد عن هذا القسم؟");
  }

  const lastMove = behavior.moves.at(-1);
  if (lastMove && Date.now() - lastMove.t > 15000) {
    showMessage("🕒 هل تحتاج مساعدة؟");
  }
}
