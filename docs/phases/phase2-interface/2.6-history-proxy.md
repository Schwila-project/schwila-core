# ๐ 2.6 - ูููู ุณุฌู ุงูุชูุงุนู (History Proxy)

## ๐ฏ ุงููุฏู
ุงุณุชุฑุฌุงุน ููุชุทูุงุช ูู ุชูุงุนู ุณุงุจู ููุฒุงุฆุฑ (ุฅู ููุฌุฏ) ูู ุงูุชุฎุฒูู ุงููุคูุช (Redis)ุ ูุนุฑุถูุง ุจุทุฑููุฉ ุฐููุฉ ุชุณุงุนุฏู ุนูู ุงุณุชููุงู ุชุฌุฑุจุชู ูู ุญูุซ ุชููู.

---

## ๐ง ุงููุฑุถูุฉ
ุฅุฐุง ูุงู ุงูุฒุงุฆุฑ ูุนุฑูููุง ุฃู ุดุจู ูุนุฑููุ ูููู ูููุธุงู ุงุณุชุฑุฌุงุน ุขุฎุฑ ููุทุฉ ุชูุงุนู ูู (ูุซู ุงููุฑุญูุฉ ุงูุชู ุชููู ุนูุฏูุงุ ุฃู ุงููุณู ุงูุฐู ุฒุงุฑู)ุ ูุนุฑุถูุง ูุงูุชุฑุงุญ ุฐูู ูุงุณุชููุงู ุงูุชูุงุนู.

---

## ๐งฉ ุงููุฏุฎูุงุช ุงููุทููุจุฉ

| ุงููุชุบูุฑ         | ุงููุตุฏุฑ                         |
|------------------|--------------------------------|
| `fingerprint`    | ูู localStorage                |
| `session_id`     | ูู sessionStorage              |
| `classification` | ูู `/identify` (phase1.5)      |

---

## ๐งญ ููุทู ุงูุงุณุชุฑุฌุงุน

1. ุงูุชุญูู ูู ุฃู ุงูุชุตููู `known` ุฃู `partially_known`
2. ุงูุจุญุซ ูู Redis ุนู `history:{fingerprint}`
3. ุฅุฐุง ููุฌุฏ ุณุฌู ุณุงุจู:
   - ุนุฑุถ ุฑุณุงูุฉ ุงุณุชุฆูุงู ุฐููุฉ
   - ุชูุนูู ุฒุฑ "ุงุณุชููุงู ูู ุญูุซ ุชูููุช"
4. ุฅุฐุง ูู ููุฌุฏ ุณุฌู:
   - ูุง ูุชู ุนุฑุถ ุฃู ุดูุก

---

## ๐ก ุฃูุซูุฉ ุนูู ุงูุฑุณุงุฆู

| ุงูุญุงูุฉ                          | ุงูุฑุณุงูุฉ ุงูููุชุฑุญุฉ                          |
|----------------------------------|--------------------------------------------|
| ุชููู ุนูุฏ ุงููุฑุญูุฉ 2.3             | "๐ ูุฑุญุจูุง ูุฌุฏุฏูุง! ุชูููุช ุนูุฏ 2.3 - ูู ุชุฑุบุจ ูู ุงููุชุงุจุนุฉุ" |
| ุฒุงุฑ ูุณู "ุงูุชุญูู" ุณุงุจููุง          | "๐งช ุขุฎุฑ ูุฑุฉ ููุช ุชุณุชุนุฑุถ ูุญุฏุฉ ุงูุชุญูู โ ูู ููููุ" |

---

## ๐ป ููุฏ ูุจุฏุฆู (client/history-proxy.js)

```js
async function checkHistory(fingerprint) {
  const lastPhase = await fetch(`/api/history/${fingerprint}`).then(r => r.json());

  if (lastPhase?.phase) {
    showResumePrompt(`๐ ูุฑุญุจูุง! ุชูููุช ุนูุฏ ${lastPhase.phase} โ ูู ุชุฑุบุจ ูู ุงููุชุงุจุนุฉุ`);
  }
}
